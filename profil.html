<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Profil - Mini Alibaba</title>
  <link rel="stylesheet" href="style.css">
  <script type="module">
    import { supabase } from "./supabase.js";

    async function chargerProfil() {
      const user = (await supabase.auth.getUser()).data.user;
      let { data, error } = await supabase.from("profiles").select("*").eq("id", user.id).single();
      if (error) alert(error.message);
      else {
        document.getElementById("email").innerText = data.email;
        document.getElementById("role").innerText = data.role;
      }
    }

    window.onload = chargerProfil;
  </script>
</head>
<body>
  <h2>Mon Profil</h2>
  <p>Email : <span id="email"></span></p>
  <p>RÃ´le : <span id="role"></span></p>
</body>
</html>
